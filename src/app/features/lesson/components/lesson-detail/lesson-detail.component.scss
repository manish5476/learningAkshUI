/* ==========================================================================
   HOST & UTILITIES
   ========================================================================== */
:host {
  display: block;
  width: 100%;
  font-family: var(--font-body);
}

.text-primary { color: var(--color-primary); }
.text-secondary { color: var(--text-secondary); }
.text-tertiary { color: var(--text-tertiary); }
.text-success { color: var(--color-success); }
.text-warning { color: var(--color-warning); }
.text-info { color: var(--color-info); }
.text-error { color: var(--color-error); }

.border-none { border: none !important; }
.font-mono { font-family: var(--font-mono); }
.text-xs { font-size: 0.75rem; }

/* Scrollbar */
.custom-scrollbar::-webkit-scrollbar { width: 6px; }
.custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
.custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }
.custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }

/* ==========================================================================
   SURFACES
   ========================================================================== */
.lesson-detail {
  padding: 0; /* padding handled by dialog */
  display: flex;
  flex-direction: column;
  gap: var(--spacing-3xl);
}

.surface-raised {
  background: color-mix(in srgb, var(--bg-secondary) 80%, transparent);
  border: var(--ui-border-width) solid rgba(255,255,255,0.05);
  border-radius: var(--ui-border-radius-lg, 1rem);
  box-shadow: var(--shadow-sm);
}

.surface-subtle {
  background: color-mix(in srgb, var(--bg-ternary) 40%, transparent);
  border: var(--ui-border-width) solid rgba(255,255,255,0.03);
  border-radius: var(--ui-border-radius-lg, 1rem);
}

/* ==========================================================================
   HEADER
   ========================================================================== */
.detail-header {
  display: flex; align-items: flex-start; gap: var(--spacing-xl);
  padding-bottom: var(--spacing-2xl); border-bottom: 1px solid var(--border-secondary);
}

.header-icon {
  width: 70px; height: 70px; border-radius: 50%; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center; font-size: 2rem;
  background: var(--bg-secondary); color: var(--text-tertiary);
  border: 1px solid var(--border-primary);
}

/* Custom Icon Colors based on type */
.video-icon { background: color-mix(in srgb, var(--color-info) 15%, transparent); color: var(--color-info); border-color: color-mix(in srgb, var(--color-info) 30%, transparent); }
.article-icon { background: color-mix(in srgb, var(--color-warning) 15%, transparent); color: var(--color-warning); border-color: color-mix(in srgb, var(--color-warning) 30%, transparent); }
.quiz-icon { background: color-mix(in srgb, var(--color-error) 15%, transparent); color: var(--color-error); border-color: color-mix(in srgb, var(--color-error) 30%, transparent); }
.assignment-icon { background: color-mix(in srgb, var(--color-success) 15%, transparent); color: var(--color-success); border-color: color-mix(in srgb, var(--color-success) 30%, transparent); }
.coding-exercise-icon { background: color-mix(in srgb, var(--color-primary) 15%, transparent); color: var(--color-primary); border-color: color-mix(in srgb, var(--color-primary) 30%, transparent); }

.header-info { flex: 1; display: flex; flex-direction: column; gap: var(--spacing-sm); }
.header-info h2 { margin: 0; font-family: var(--font-heading); font-size: var(--font-size-2xl); font-weight: var(--font-weight-bold); color: var(--text-primary); }

.header-meta { display: flex; align-items: center; flex-wrap: wrap; gap: var(--spacing-md); }
.meta-pill {
  display: inline-flex; align-items: center; gap: 6px; padding: 4px 12px;
  background: var(--bg-secondary); border: 1px solid var(--border-primary);
  border-radius: 999px; font-size: var(--font-size-xs); font-family: var(--font-mono); color: var(--text-secondary);
}
.badge-free { background: color-mix(in srgb, var(--color-success) 15%, transparent); color: var(--color-success); border-color: var(--color-success); font-weight: 700; }

.status-indicator { flex-shrink: 0; }

/* ==========================================================================
   CONTENT SECTIONS
   ========================================================================== */
.content-section { display: flex; flex-direction: column; gap: var(--spacing-md); }
.section-title { margin: 0; font-family: var(--font-heading); font-size: var(--font-size-lg); font-weight: var(--font-weight-bold); display: flex; align-items: center; gap: 8px; color: var(--text-primary); }

/* Description */
.description-box { padding: var(--spacing-xl); }
.description { margin: 0; color: var(--text-secondary); line-height: 1.6; font-size: var(--font-size-md); white-space: pre-wrap; }

/* Previews */
.preview-box { padding: var(--spacing-xl); }

/* Video Preview Layout */
.video-preview { display: flex; gap: var(--spacing-2xl); align-items: flex-start; }
.video-thumbnail-wrapper {
  width: 240px; aspect-ratio: 16/9; position: relative; border-radius: var(--ui-border-radius-lg);
  overflow: hidden; background: #000; flex-shrink: 0; border: 1px solid var(--border-secondary); box-shadow: var(--shadow-sm);
}
.video-thumbnail { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; transition: opacity 0.3s; }
.video-thumbnail-wrapper:hover .video-thumbnail { opacity: 0.5; }
.play-overlay { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: #fff; opacity: 0.9; }

.no-thumbnail { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; color: var(--text-tertiary); font-size: 0.8rem; background: var(--bg-ternary); }
.no-thumbnail i { font-size: 2rem; }

.video-info { flex: 1; display: flex; flex-direction: column; }
.info-row { display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md) 0; border-bottom: 1px solid var(--border-secondary); }
.info-label { color: var(--text-secondary); font-size: var(--font-size-sm); font-weight: 500; }
.info-value { display: flex; align-items: center; gap: 6px; color: var(--text-primary); font-size: var(--font-size-sm); font-weight: 600; text-align: right; max-width: 60%; word-break: break-word; }
.link-text { color: var(--color-primary); text-decoration: none; transition: 0.2s; }
.link-text:hover { text-decoration: underline; color: var(--color-info); }

/* Article Preview */
.article-content { max-height: 250px; overflow-y: auto; padding-right: var(--spacing-md); color: var(--text-secondary); line-height: 1.6; }

/* Quiz Preview */
.quiz-preview { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: var(--spacing-2xl) 0; text-align: center; }
.quiz-preview .icon-circle { width: 60px; height: 60px; border-radius: 50%; background: var(--bg-secondary); display: flex; align-items: center; justify-content: center; font-size: 2rem; margin-bottom: var(--spacing-md); }
.quiz-preview p { margin: 0; font-size: var(--font-size-md); }

/* ==========================================================================
   RESOURCES
   ========================================================================== */
.resources-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: var(--spacing-md); }
.resource-card {
  display: flex; align-items: center; gap: var(--spacing-md); padding: var(--spacing-md);
  background: var(--bg-secondary); border: 1px solid var(--border-secondary);
  border-radius: var(--ui-border-radius-lg); text-decoration: none; color: var(--text-primary); transition: 0.3s;
}
.hover-lift:hover { transform: translateY(-2px); background: var(--bg-hover); border-color: var(--border-primary); box-shadow: var(--shadow-sm); }

.r-icon { width: 36px; height: 36px; border-radius: 8px; background: var(--bg-ternary); display: flex; align-items: center; justify-content: center; color: var(--text-secondary); font-size: 1.1rem; flex-shrink: 0; }
.r-info { display: flex; flex-direction: column; flex: 1; overflow: hidden; }
.r-title { font-weight: 600; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.r-type { font-size: 0.7rem; color: var(--text-tertiary); margin-top: 2px; }
.r-action { color: var(--text-tertiary); font-size: 0.9rem; transition: color 0.2s; }
.resource-card:hover .r-action { color: var(--color-primary); }

/* ==========================================================================
   ACTIONS FOOTER
   ========================================================================== */
.detail-actions {
  display: flex; justify-content: flex-end; gap: var(--spacing-md);
  padding-top: var(--spacing-xl); border-top: 1px solid var(--border-secondary);
}

.btn-primary, .btn-secondary {
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: var(--spacing-md) var(--spacing-xl); font-size: var(--font-size-sm); font-weight: var(--font-weight-bold);
  border-radius: var(--ui-border-radius-lg); cursor: pointer; transition: 0.2s; border: none;
}
.btn-primary { background: var(--color-primary); color: #fff; box-shadow: var(--shadow-sm); }
.btn-primary:hover { background: var(--color-primary-dark); transform: translateY(-1px); box-shadow: var(--shadow-md); }
.btn-secondary { background: transparent; color: var(--text-primary); border: 1px solid var(--border-primary); }
.btn-secondary:hover { background: var(--bg-secondary); }

/* ==========================================================================
   RESPONSIVE
   ========================================================================== */
@media (max-width: 640px) {
  .detail-header { flex-direction: column; align-items: flex-start; }
  .status-indicator { align-self: flex-start; }
  .video-preview { flex-direction: column; gap: var(--spacing-lg); }
  .video-thumbnail-wrapper { width: 100%; }
  .detail-actions { flex-direction: column-reverse; }
  .btn-primary, .btn-secondary { width: 100%; }
}