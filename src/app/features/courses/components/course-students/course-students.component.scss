/* ==========================================================================
   HOST & GLOBALS 
   ========================================================================== */
:host {
  display: block;
  min-height: 100vh;
  background-color: var(--bg-primary, #030712);
  font-family: var(--font-body, 'Inter', sans-serif);
  color: var(--text-primary, #f8fafc);
}

.text-primary { color: var(--color-primary); }
.text-secondary { color: var(--text-secondary); }
.text-tertiary { color: var(--text-tertiary); }
.text-success { color: var(--color-success); }
.text-info { color: var(--color-info); }
.text-error { color: var(--color-error); }

.m-0 { margin: 0; }
.mt-xs { margin-top: var(--spacing-xs, 0.25rem); }
.mt-md { margin-top: var(--spacing-md, 1rem); }
.mt-lg { margin-top: var(--spacing-lg, 1.5rem); }
.mb-lg { margin-bottom: var(--spacing-lg, 1.5rem); }
.mb-2xl { margin-bottom: var(--spacing-2xl, 3rem); }
.ml-md { margin-left: var(--spacing-md, 1rem); }
.py-3xl { padding-top: 3rem; padding-bottom: 3rem; }
.text-center { text-align: center; }

.text-sm { font-size: 0.875rem; }
.text-xs { font-size: 0.75rem; }
.font-medium { font-weight: 500; }
.font-bold { font-weight: 700; }
.font-mono { font-family: var(--font-mono); }

/* ==========================================================================
   LAYOUT & SURFACES
   ========================================================================== */
.roster-container { max-width: 1400px; margin: 0 auto; padding: var(--spacing-3xl) var(--spacing-4xl); }

.glass-panel {
  background: var(--glass-bg-c, rgba(15, 23, 42, 0.6));
  backdrop-filter: blur(var(--glass-blur-c, 24px));
  -webkit-backdrop-filter: blur(var(--glass-blur-c, 24px));
  border: 1px solid var(--glass-border-c, rgba(255,255,255,0.08));
  border-radius: var(--ui-border-radius-xl, 1.5rem);
  padding: var(--spacing-3xl, 2.5rem);
}

.surface-subtle {
  background: color-mix(in srgb, var(--bg-ternary, #111) 40%, transparent);
  border-radius: var(--ui-border-radius-lg, 1rem);
  border: 1px dashed rgba(255,255,255,0.1);
}

/* ==========================================================================
   HEADER & SEARCH
   ========================================================================== */
.dashboard-header { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: var(--spacing-lg); }
.header-left { display: flex; align-items: center; gap: var(--spacing-xl); }
.header-right { display: flex; align-items: center; }

.btn-ghost { background: transparent; color: var(--text-secondary); border: 1px solid rgba(255,255,255,0.1); width: 44px; height: 44px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; font-size: 1.2rem; }
.btn-ghost:hover { background: rgba(255,255,255,0.1); color: #fff; border-color: rgba(255,255,255,0.2); }

.page-title { font-family: var(--font-heading); font-size: 2rem; font-weight: 800; letter-spacing: -0.02em; }
.gradient-text { background: linear-gradient(135deg, #fff 0%, var(--text-secondary) 100%); -webkit-background-clip: text; color: transparent; }

/* Custom Inputs */
.search-bar { position: relative; }
.search-bar i { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); z-index: 1; }
.custom-input {
  background: var(--bg-ternary); border: var(--ui-border-width-lg) solid var(--border-primary);
  border-radius: 999px; color: var(--text-primary); font-family: var(--font-body);
  padding: 0.85rem 1rem 0.85rem 2.5rem; transition: var(--transition-base); outline: none; font-size: 0.95rem; width: 300px;
}
.custom-input:focus { border-color: var(--color-primary); box-shadow: 0 0 0 3px var(--color-primary-bg); background: var(--bg-primary); }

.btn-glow {
  padding: 0.85rem 1.5rem; border-radius: 999px; font-size: 0.95rem; font-weight: 700; border: none; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 8px; font-family: var(--font-body);
}
.btn-glow.outline { background: transparent; border: 1px solid rgba(255,255,255,0.2); color: #fff; }
.btn-glow.outline:hover { background: rgba(255,255,255,0.05); border-color: #fff; }

/* ==========================================================================
   TABLE & DATA
   ========================================================================== */
.table-header-row { display: flex; align-items: center; justify-content: space-between; }
.custom-table-wrapper { width: 100%; overflow-x: auto; }

/* PrimeNG Table Glassmorphism Overrides */
:host ::ng-deep .p-datatable-glass {
  .p-datatable-header { background: transparent; border: none; padding: 0; }
  .p-datatable-thead > tr > th {
    background: color-mix(in srgb, var(--bg-secondary) 50%, transparent); color: var(--text-tertiary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 700; border-bottom: 1px solid rgba(255,255,255,0.05); padding: 1.25rem 1rem;
  }
  .p-datatable-tbody > tr > td { background: transparent; border-bottom: 1px solid rgba(255,255,255,0.02); padding: 1.25rem 1rem; color: var(--text-primary); }
  .p-datatable-tbody > tr { transition: background 0.2s; }
  .p-datatable-tbody > tr:hover { background: rgba(255,255,255,0.02); }
  
  /* Paginator */
  .p-paginator { background: transparent; border: none; padding-top: 1rem; }
  .p-paginator .p-paginator-pages .p-paginator-page.p-highlight { background: color-mix(in srgb, var(--color-primary) 20%, transparent); border-color: var(--color-primary); color: var(--color-primary); }
}

/* Student Profile Cell */
.student-cell { display: flex; align-items: center; gap: 1rem; }
.s-avatar, .s-avatar-fallback { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
.s-avatar-fallback { background: color-mix(in srgb, var(--color-primary) 15%, transparent); color: var(--color-primary); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.9rem; border: 1px solid color-mix(in srgb, var(--color-primary) 30%, transparent); }
.s-info { display: flex; flex-direction: column; gap: 2px; }

/* Progress Cell */
.progress-cell { display: flex; align-items: center; gap: 1rem; width: 100%; max-width: 200px; }
:host ::ng-deep .table-progress.p-progressbar { flex: 1; height: 6px; background: rgba(255,255,255,0.05); border-radius: 999px; }
:host ::ng-deep .table-progress.p-progressbar .p-progressbar-value { background: linear-gradient(90deg, var(--color-info), var(--color-primary)); border-radius: 999px; }

/* Actions */
.btn-icon { width: 36px; height: 36px; border-radius: 8px; border: none; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; background: transparent; }
.btn-danger { color: var(--text-secondary); }
.btn-danger:hover { background: var(--color-error-bg); color: var(--color-error); }

/* ==========================================================================
   STATES
   ========================================================================== */
.loading-state { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 4rem 0; }
.empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 5rem 2rem; text-align: center; }
.empty-state .icon-circle { width: 80px; height: 80px; border-radius: 50%; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); display: flex; align-items: center; justify-content: center; font-size: 2.5rem; margin-bottom: 1.5rem; }
.empty-state h3 { font-family: var(--font-heading); font-size: 1.5rem; color: #fff; margin: 0 0 0.5rem; }

/* Custom Dialog */
:host ::ng-deep .glass-dialog { background: var(--bg-secondary); border: 1px solid var(--border-primary); border-radius: var(--ui-border-radius-lg); overflow: hidden; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.8); }
:host ::ng-deep .glass-dialog .p-dialog-header { background: rgba(0,0,0,0.2); border-bottom: 1px solid var(--border-secondary); color: #fff; }
:host ::ng-deep .glass-dialog .p-dialog-content { background: transparent; color: var(--text-secondary); padding-top: 1.5rem; }
:host ::ng-deep .glass-dialog .p-dialog-footer { background: transparent; border-top: 1px solid var(--border-secondary); }

/* Responsive */
@media (max-width: 768px) {
  .roster-container { padding: 1.5rem; }
  .dashboard-header { flex-direction: column; align-items: flex-start; }
  .header-right { width: 100%; flex-direction: column; gap: 1rem; align-items: stretch; }
  .custom-input { width: 100%; }
  .btn-glow { margin-left: 0; justify-content: center; }
}